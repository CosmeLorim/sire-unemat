<script>
    $('#atualizarUsuario').on('click', function ()
    {
        var usuarioNovo = new Usuario();
        usuarioNovo = pegarDadosFormularioUsuarios();
        usuarioNovo.passwd = $('#passwd1').val();
        if (usuarioNovo === false)
            return;

        if (usuarioAntigo.id === null)
        {
            $.Notify({
                caption: 'Erro',
                content: 'Você não selecionou um usuário para atualizar!',
                timeout: 10000,
                type: 'alert'
            });
            return;
        }

        var admin = new Admin();
        var titulo = 'Atualização de usuários';
        var conteudo = 'Deseja usuário \"' + usuarioAntigo.nome + '\"?';
        var callback = function ()
        {
            $.ajax({
                url: '/api/usuario/' + usuarioAntigo.id,
                type: 'put',
                data:
                    {
                        admin: usuarioNovo.admin,
                        nome: usuarioNovo.nome,
                        passwd: usuarioNovo.passwd === "" ? "" : md5(usuarioNovo.passwd),
                        usr: usuarioNovo.usr,
                        perfil: usuarioNovo.perfil
                    },
                success: function (data, status) {
                        $.Notify({
                            caption: data.title,
                            content: data.msg,
                            timeout: 10000,
                            type: data.status
                        });
                        if (data.status === 'success')
                        {
                            atualizaGridUsuarios();
                            limpaTelaUsuarios();
                        }
                    }
            });
        };

        admin.dialog(titulo, conteudo, callback);
    });
</script>