<script>
    $('#inserirPeriodo').on('click', function () {
        var periodoNovo = new Periodo();

        if (!periodoNovo.validaNome($('#nome').val()))
            return;
        periodoNovo.nome = $('#nome').val();
        
        periodoNovo.ativo = $('#ativo').prop('checked'); 

        var admin = new Admin();
        var titulo = 'Cadastro de período';
        var conteudo = 'Cadastrar o período \"' + periodoNovo.nome + '\"?';
                
        var callback = function ()
        {
            $.post('/api/periodo',
                {
                    nome: periodoNovo.nome,
                    ativo: periodoNovo.ativo,
                    dataInicio: 
                        {
                            dia: moment($("#data").data('daterangepicker').startDate).format('DD'),
                            mes: moment($("#data").data('daterangepicker').startDate).format('MM'),
                            ano: moment($("#data").data('daterangepicker').startDate).format('YYYY')
                        },
                    dataFim: 
                        {
                            dia: moment($("#data").data('daterangepicker').endDate).format('DD'),
                            mes: moment($("#data").data('daterangepicker').endDate).format('MM'),
                            ano: moment($("#data").data('daterangepicker').endDate).format('YYYY')
                        }
                },
            function (data, status) {
                $.Notify({
                    caption: data.title,
                    content: data.msg,
                    timeout: 10000,
                    type: data.status
                });
                if (data.status === 'success')
                {
                    atualizaGridPeriodos();
                    limpaTelaPeriodos();
                }
            });
        };
        admin.dialog(titulo, conteudo, callback);
    });
</script>